<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Python Packaging Guide &#8212; Roman Supernova PIT Python Packaging Guide  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=b051e2c3" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Minimal package layout" href="minimal.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="#">
    <img class="logo" src="_static/logo_black_filled.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Roman Supernova PIT Python packaging guide and template.</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="minimal.html">Minimal package layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">Documenting your Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing your package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tox.html">Running Commands with Tox</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Compiled C/Cython extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Releasing Your Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Command-line scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Including data in your package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/index.html">Advanced Topics</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="minimal.html" title="next chapter">Minimal package layout</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          <a href="minimal.html" title="Next document">Minimal package layout</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="python-packaging-guide">
<h1>Python Packaging Guide<a class="headerlink" href="#python-packaging-guide" title="Link to this heading">¶</a></h1>
<p>This guide is intended to explain modern Python packaging, it covers most of the core components of a modern package, and explains these components. It is broken up into the following sections:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="minimal.html">Minimal package layout</a><ul>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#license"><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#readme-rst"><code class="docutils literal notranslate"><span class="pre">README.rst</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#my-package-init-py"><code class="docutils literal notranslate"><span class="pre">my_package/__init__.py</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#pyproject-toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#setup-py"><code class="docutils literal notranslate"><span class="pre">setup.py</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#manifest-in"><code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal.html#trying-out-your-package">Trying out your package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">Documenting your Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="docs.html#docstrings">Docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#narrative-documentation">Narrative Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#including-docstrings-in-the-narrative-documentation">Including docstrings in the narrative documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#declaring-dependencies-for-documentation">Declaring dependencies for documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#setting-up-readthedocs">Setting up ReadTheDocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#add-plots-to-your-documentation">Add plots to your documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing your package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tests.html#where-to-keep-tests">Where to keep tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html#running-tests">Running tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html#defining-default-pytest-options">Defining default pytest options</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html#running-doctests">Running doctests</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html#declaring-dependencies-for-tests">Declaring dependencies for tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tox.html">Running Commands with Tox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tox.html#getting-started-with-tox-running-tests">Getting Started with Tox: Running tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="tox.html#building-documentation-with-tox">Building Documentation with tox</a></li>
<li class="toctree-l2"><a class="reference internal" href="tox.html#testing-packages-with-compiled-extensions">Testing Packages with Compiled Extensions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Compiled C/Cython extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#defining-extensions-in-setup-py">Defining extensions in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#packages-with-many-extensions">Packages with many extensions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Releasing Your Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="releasing.html#incrementing-version-numbers">Incrementing Version Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="releasing.html#building-source-distributions">Building Source Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="releasing.html#publishing-to-pypi">Publishing to PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="releasing.html#releasing-from-branches">Releasing from Branches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Command-line scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Including data in your package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continuous Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ci.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced/index.html">Advanced Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced/versioning.html">Specifying the Version of your Package</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="using-the-template">
<h1>Using the Template<a class="headerlink" href="#using-the-template" title="Link to this heading">¶</a></h1>
<p>With this guide is a <a class="reference external" href="https://cookiecutter.readthedocs.io/">cookiecutter</a> template which allows you to get started quickly with a package as described in this guide.</p>
<p>To create a new package based on the template run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>cookiecutter<span class="w"> </span>cruft
<span class="gp">$ </span>cruft<span class="w"> </span>create<span class="w"> </span>https://github.com/Roman-Supernova-PIT/package-template
</pre></div>
</div>
<p>It will ask you several questions:</p>
<ul class="simple">
<li><p><em>Select your package name</em> : This is the name your package will have on PyPi, and <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&lt;packagename&gt;</span></code> will be the command that somebody types in order to install it.  (It will also be the name of the directory that gets created, ready for you to start putting code into.)</p></li>
<li><p><em>Select your module name</em> : This is the name of the module.  To use your package in python, you will do <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">&lt;modulename&gt;</span></code>.  Ideally your module name is the same as your package name, and that’s what it defaults to.  Making the two the same makes things simpler for everybody.  However, you may want to prefix your package (but not module) name with <code class="docutils literal notranslate"><span class="pre">roman_snpit_</span></code>.  You may need to do this if your module name is too close to something that already exists on PyPi.</p></li>
<li><p><em>Name of repo on github underneath Roman-Supernova-PIT</em> : Your github repo will be at <code class="docutils literal notranslate"><span class="pre">https://github.com/Roman-Supernova-PIT/&lt;reponame&gt;</span></code>.  Ideally, this is the same as your module name, and that’s what it defaults to.</p></li>
<li><p><em>Short description of your package</em> : one-line description of your package.  Don’t keep the default here, put something specific to your package in.</p></li>
<li><p><em>Author Name</em> : If you are mostly writing this yourself, put your own name in.  Otherwise, put in Roman Supernova PIT.</p></li>
<li><p><em>Author Email</em> : This is a contact person for this package.  Hopefully it will never get used, but somebody might need to ask about it.  Put the email of the person who should receive those questions here.</p></li>
<li><p><em>GitHub username</em> : Your github username, or the github username of the person who will be the primary owner of this package.</p></li>
<li><p><em>Select minimum python version</em> : Select 1 for 3.11 here if that’s at all possible, as that’s the environment we’re using for the SN PIT.  Only pick a higher version if you <em>really</em> need it.</p></li>
<li><p><em>…non-python code that compiles</em>: If you’ve only written Python, leave this at ‘n’.  If you have compiled extensions (e.g. C++ code that you link to Ptyhon with <code class="docutils literal notranslate"><span class="pre">ctypes</span></code>), answer ‘y’ here.</p></li>
<li><p><em>include example code</em> : This option will fill your new package with some example functions to allow you to test it.  It defaults to ‘y’.  Remember to remove the example code later if you don’t really want it to be part of your package.</p></li>
<li><p><em>Include github workflow testing…</em> : Answer ‘y’ (the default) to include github workflows that will instruct github to automatically run tests on any pull request to your repo.  You probably want to leave this at ‘y’.</p></li>
<li><p><em>install_requires</em> : Here you can list additional external packages that your package requires.  Don’t worry if you miss some here, you will be able to add to that list later by editing a file the package template creates.</p></li>
</ul>
<p>Cruft is built on cookiecutter, and enables the updating of the template from the source.
This takes the form of pull requests to the repository that the new package is pushed to.
If a package already has a cookiecutter template, it can be linked to the parent repository using <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">link</span> <span class="pre">url-to-template</span></code>.</p>
<p>To manually check whether the current environment matches with the template then <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">check</span></code> will tell you what the current status is.
<code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code> will manually trigger an updating of the package to the template.</p>
<p>If you would like to stick to simply the cookiecutter approach, the template still supports that functionality thusly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>cookiecutter
<span class="gp">$ </span>cookiecutter<span class="w"> </span>gh:Roman-Supernova-PIT/package-template<span class="w"> </span>-o<span class="w"> </span>./output_directory
</pre></div>
</div>
<p>This will create a new directory in your current directory named the same as the value of “packagename” you supplied. Change into this directory and run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code> to make it into a git repository, and make an initial commit. Then pip install into a clean environment and try building docs:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>&lt;your<span class="w"> </span>package<span class="w"> </span>name&gt;
<span class="gp">$ </span>git<span class="w"> </span>init<span class="w"> </span>-b<span class="w"> </span>main
<span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[docs,test]&quot;</span>
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>docs
<span class="gp">$ </span>make<span class="w"> </span>html
</pre></div>
</div>
<p>This is required in order to have software versioning working for your package, and to test creating docs.</p>
<p>The goal of the template is to quickly get you setup with the files described in the guide.</p>
<section id="when-git-add-ing-files-to-your-repo">
<h2>When <a href="#id1"><span class="problematic" id="id2">``</span></a>git add``ing files to your repo<a class="headerlink" href="#when-git-add-ing-files-to-your-repo" title="Link to this heading">¶</a></h2>
<p>You want to add everything created by the package template, and you probably want to do that the first time before you start adding your own files and customizing it.  However, if you created your clean environment in such a way that it created a new directory in your package directory, make sure <em>not</em> to import that environment into git!  (This will happen, for instance, if you run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-mvenv</span> <span class="pre">clean_environment</span></code>.  It will create a directory <code class="docutils literal notranslate"><span class="pre">clean_environment</span></code> under your current directory, which will end up with a lot of stuff you really don’t want to track in git.)  As long as you didn’t do that, you can probably just run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code> and trust the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file to not add most of the stuff you don’t want.</p>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          <a href="minimal.html" title="Next document">Minimal package layout</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2024, Roman Supernova PIT.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>