<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Documenting your Package &#8212; Roman Supernova PIT Python Packaging Guide  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=b051e2c3" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing your package" href="tests.html" />
    <link rel="prev" title="Minimal package layout" href="minimal.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo_black_filled.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">Roman Supernova PIT Python packaging guide and template.</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="minimal.html">Minimal package layout</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documenting your Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#docstrings">Docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#narrative-documentation">Narrative Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#including-docstrings-in-the-narrative-documentation">Including docstrings in the narrative documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#declaring-dependencies-for-documentation">Declaring dependencies for documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-readthedocs">Setting up ReadTheDocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-plots-to-your-documentation">Add plots to your documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing your package</a></li>
<li class="toctree-l1"><a class="reference internal" href="checklist.html">Checklist for creating a PR</a></li>
<li class="toctree-l1"><a class="reference internal" href="tox.html">Running Commands with Tox</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Compiled C/Cython extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Releasing Your Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Command-line scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Including data in your package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/index.html">Advanced Topics</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="minimal.html" title="previous chapter">Minimal package layout</a></li>
      <li>Next: <a href="tests.html" title="next chapter">Testing your package</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="minimal.html" title="Previous document">Minimal package layout</a>
        </li>
        <li>
          <a href="tests.html" title="Next document">Testing your package</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="documenting-your-package">
<span id="documentation"></span><h1>Documenting your Package<a class="headerlink" href="#documenting-your-package" title="Link to this heading">¶</a></h1>
<p>There are two main ways to document your project, both of
which are essential: <a class="reference internal" href="#docstrings"><span class="std std-ref">Docstrings</span></a> and <a class="reference internal" href="#narrative"><span class="std std-ref">Narrative Documentation</span></a>.</p>
<section id="docstrings">
<span id="id1"></span><h2>Docstrings<a class="headerlink" href="#docstrings" title="Link to this heading">¶</a></h2>
<p>First, public functions, methods, and classes
in your package should include <em>docstrings</em>, which are strings
attached to those objects which the user can access interactively
using e.g. <code class="docutils literal notranslate"><span class="pre">help()</span></code> and which can also be retrieved by automated
tools. See <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">PEP 257 - Docstring Conventions</a>
for a high-level overview of what docstrings are. We recommend adopting
the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">numpydoc</a>
format for docstrings. An example of such a docstring is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">long_var_name</span><span class="o">=</span><span class="s1">&#39;hi&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A one-line summary that does not use variable names.</span>

<span class="sd">    Several sentences providing an extended description. Refer to</span>
<span class="sd">    variables using back-ticks, e.g. `var`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    var : int</span>
<span class="sd">        The type above can either refer to an actual Python type</span>
<span class="sd">        (e.g. ``int``), or describe the type of the variable in more</span>
<span class="sd">        detail, e.g. ``(N,) ndarray`` or ``array_like``.</span>
<span class="sd">    long_var_name : {&#39;hi&#39;, &#39;ho&#39;}, optional</span>
<span class="sd">        Choices in brackets, default first when optional.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    out : type</span>
<span class="sd">        Explanation of `out`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>These docstrings should be included in the Python files alongside the Python
objects they document.</p>
</section>
<section id="narrative-documentation">
<span id="narrative"></span><h2>Narrative Documentation<a class="headerlink" href="#narrative-documentation" title="Link to this heading">¶</a></h2>
<p>Second, you should write a set of narrative documentation which functions as a
user guide, such as <a class="reference external" href="http://docs.astropy.org">http://docs.astropy.org</a> or <a class="reference external" href="http://docs.sunpy.org">http://docs.sunpy.org</a>.
This package template will create the basis for this.  You will find
that in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory under the top level of your repo.  You
will want to edit the following files to make them correct for your
package:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">installation.rst</span></code> – with luck, the stuff that is there already is
sufficient, but you should review it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">usage.rst</span></code> – This is where you will write your main documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index.rst</span></code> – This one may be OK as is, but you will need to edit
it if your documentation is long (see below).</p></li>
</ul>
<p>If your documentation is short enough, you can write it all on the
<code class="docutils literal notranslate"><span class="pre">usage.rst</span></code> page.  If it’s long, you might want to divide it into
sections.  Give each section its own <code class="docutils literal notranslate"><span class="pre">.rst</span></code> file.  Then, list the
files you’ve added underneath the <code class="docutils literal notranslate"><span class="pre">..tocktree::</span></code> directive in the file
<code class="docutils literal notranslate"><span class="pre">index.rst</span></code>.</p>
<p>All of these files are in <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">Sphinx reStructuredText format</a>.
If you haven’t used Sphinx before, you maybe interested in their
<a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/quickstart.html">Getting Started</a> guide.</p>
<section id="seeing-your-documentation">
<h3>Seeing your documentation<a class="headerlink" href="#seeing-your-documentation" title="Link to this heading">¶</a></h3>
<p><strong>NOTE TO MEGAN</strong> this is currently broken for me.  <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> works
for me in the package template, However, when I make a new package
straight from the package template and try this, I get a lot of errors.
I was able to get it to work in <code class="docutils literal notranslate"><span class="pre">snpit_utils</span></code> by also doing <code class="docutils literal notranslate"><span class="pre">pip</span>
<span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> in my venv, so that it could find that module.  However,
it didn’t automatically include the docstrings in the created html
documentation.</p>
<p>The package template includes much (perhaps everything) of what you need
to build the packages locally.  First, unless you are sure you already
have everything for building the docs in your python environment, make
yourself a virtual environment (either with conda or python venv) to
work in.  In that environment, and at the top level of your repo
checkout, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;.[docs]&quot;</span>
</pre></div>
</div>
<p>then in the <cite>docs</cite> directory run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>That will create a subdirectory <code class="docutils literal notranslate"><span class="pre">_build/html</span></code> underneath the <code class="docutils literal notranslate"><span class="pre">docs</span></code>
directory.  Open the file <code class="docutils literal notranslate"><span class="pre">index.html</span></code> in that subdirectory in your
web browser, and you should see a preview of your documentation.</p>
</section>
</section>
<section id="including-docstrings-in-the-narrative-documentation">
<span id="automodapi"></span><h2>Including docstrings in the narrative documentation<a class="headerlink" href="#including-docstrings-in-the-narrative-documentation" title="Link to this heading">¶</a></h2>
<p>As part of the narrative documentation, it is also common practice to include an
Application programming interface (API) page which lists the available classes,
methods, and functions in your package. Thankfully, if you’ve defined your docstrings
as described in <a class="reference internal" href="#docstrings"><span class="std std-ref">Docstrings</span></a>, then this can be automated using the
<a class="reference external" href="https://sphinx-automodapi.readthedocs.io">sphinx-automodapi</a>
package. See the documentation of that package for more details, but a
repo created from this package template should already be set up to
automatically include this.</p>
<p>briefly,
you will need to add <code class="docutils literal notranslate"><span class="pre">'sphinx_automodapi.automodapi'</span></code> to the <code class="docutils literal notranslate"><span class="pre">extensions</span></code>
variable in your <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinx_automodapi.automodapi&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>In addition, if you use the numpydoc format for your docstrings, as recommended in <a class="reference internal" href="#docstrings"><span class="std std-ref">Docstrings</span></a>,
you will need to include either <code class="docutils literal notranslate"><span class="pre">'numpydoc'</span></code> or <code class="docutils literal notranslate"><span class="pre">'sphinx.ext.napoleon'</span></code> in
the list of <code class="docutils literal notranslate"><span class="pre">extensions</span></code> (both packages provide a way to parse numpydoc-style
docstrings). If you use the numpydoc package, you will need to also include:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">numpydoc_show_class_members</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<p>in your <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file.</p>
</section>
<section id="declaring-dependencies-for-documentation">
<h2>Declaring dependencies for documentation<a class="headerlink" href="#declaring-dependencies-for-documentation" title="Link to this heading">¶</a></h2>
<p>To make it easier for contributors to get set up with the dependencies
required to build the documentation, as well as to make it easier to
configure automated builds (whether for <a class="reference internal" href="#readthedocs"><span class="std std-ref">ReadTheDocs</span></a>
or <a class="reference internal" href="tox.html#tox"><span class="std std-ref">tox</span></a>), you should define an <code class="docutils literal notranslate"><span class="pre">[project.optional-dependencies]</span></code> section in
your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file named <code class="docutils literal notranslate"><span class="pre">docs</span></code> which lists the dependencies
required to build the documentation (not including dependencies already
mentioned in <code class="docutils literal notranslate"><span class="pre">dependencies</span></code>):</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.optional-dependencies]</span>
<span class="n">docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;sphinx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;sphinx-automodapi&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;numpydoc&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This will then allow contributors to type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="p">[</span><span class="n">docs</span><span class="p">]</span>
</pre></div>
</div>
<p>to install the package in developer/editable mode along with the documentation
dependencies.</p>
</section>
<section id="setting-up-readthedocs">
<span id="readthedocs"></span><h2>Setting up ReadTheDocs<a class="headerlink" href="#setting-up-readthedocs" title="Link to this heading">¶</a></h2>
<p><strong>NOTE FOR MEGAN</strong> : isn’t this section out of date?  I thought we
weren’t going to use readthedocs.</p>
<p><a class="reference external" href="http://readthedocs.org/">ReadTheDocs</a> is a platform that will build
documentation with sphinx and will then host it, and is used by many of
the Scientific Python packages. The easiest way to configure the build
is to add a file called <code class="docutils literal notranslate"><span class="pre">.readthedocs.yml</span></code> to your package, and we
recommend starting off with:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">build</span><span class="p">:</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">latest</span>
<span class="w">  </span><span class="nt">tools</span><span class="p">:</span>
<span class="w">    </span><span class="nt">python</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.9</span>

<span class="nt">python</span><span class="p">:</span>
<span class="w">  </span><span class="nt">install</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="w">      </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">extra_requirements</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docs</span>
</pre></div>
</div>
<p>Once you have added this to your repository, you can then import your
package into ReadTheDocs as described in <a class="reference external" href="https://docs.readthedocs.io/en/stable/intro/import-guide.html">this guide</a>.</p>
</section>
<section id="add-plots-to-your-documentation">
<span id="plot-directive"></span><h2>Add plots to your documentation<a class="headerlink" href="#add-plots-to-your-documentation" title="Link to this heading">¶</a></h2>
<p>A plot is worth <em>many</em> words, and sometimes documentation
can demonstrate the uses and advantages of using a given
package much more efficiently than narrative docs. Matplotlib,
for example, has made this quite straightforward with the
<a class="reference external" href="https://matplotlib.org/stable/api/sphinxext_plot_directive_api.html">plot directive</a>.</p>
<p>To add a plot to your Sphinx documentation, add the following string to the
<code class="docutils literal notranslate"><span class="pre">extensions</span></code> list in your <code class="docutils literal notranslate"><span class="pre">docs/conf.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>  <span class="c1"># preserve your other extensions here, then add:</span>
    <span class="s2">&quot;matplotlib.sphinxext.plot_directive&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To make use of this extension, you will also need to add <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to your
<code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">deps</span><span class="w"> </span><span class="o">=</span>
<span class="w">   </span><span class="c1"># preserve your other deps here, then add:</span>
<span class="w">   </span><span class="na">matplotlib</span>
</pre></div>
</div>
<p>Now you can add plots to your Sphinx docs by adding a block like
the following to your narrative docs:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Here&#39;s a plot:

<span class="p">..</span> <span class="ow">plot</span><span class="p">::</span>

    import matplotlib.pyplot as plt

    x, y = [1, 2, 3], [4, 5, 6]

    plt.figure()
    plt.plot(x, y)
</pre></div>
</div>
<p>By default, sphinx and matplotlib will render the figure defined by the
Python code in the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">plot::</span></code> block, without the source code. Full documentation
for the configuration settings for the plot directive can be found in the
<a class="reference external" href="https://matplotlib.org/stable/api/sphinxext_plot_directive_api.html">matplotlib docs</a>.</p>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="minimal.html" title="Previous document">Minimal package layout</a>
        </li>
        <li>
          <a href="tests.html" title="Next document">Testing your package</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2024, Roman Supernova PIT.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/docs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>